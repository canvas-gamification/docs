"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3701],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return d}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),m=u(n),d=r,h=m["".concat(l,".").concat(d)]||m[d]||p[d]||i;return n?a.createElement(h,s(s({ref:t},c),{},{components:n})):a.createElement(h,s({ref:t},c))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var u=2;u<i;u++)s[u]=n[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2701:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return l},metadata:function(){return u},toc:function(){return c},default:function(){return m}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),s=["components"],o={sidebar_position:5},l="Clause Injection",u={unversionedId:"junit-framework/input-tests/clause-injection",id:"junit-framework/input-tests/clause-injection",title:"Clause Injection",description:'Often, you will come across a program whose output contains the input given by the user, or whose output needs to change conditionally based on the input. This is where clause injection comes in. By setting up your test sentence with "placeholders", you can dynamically "inject" clauses when the test is run.',source:"@site/docs/junit-framework/input-tests/clause-injection.md",sourceDirName:"junit-framework/input-tests",slug:"/junit-framework/input-tests/clause-injection",permalink:"/docs/docs/junit-framework/input-tests/clause-injection",editUrl:"https://github.com/canvas-gamification/docs/docs/junit-framework/input-tests/clause-injection.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Parameterized Testing",permalink:"/docs/docs/junit-framework/input-tests/parameterized-testing"},next:{title:"Full Examples",permalink:"/docs/docs/junit-framework/input-tests/full-example"}},c=[{value:"Placeholder Setup",id:"placeholder-setup",children:[],level:2},{value:"Clause Injection at Test Runtime",id:"clause-injection-at-test-runtime",children:[],level:2}],p={toc:c};function m(e){var t=e.components,n=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"clause-injection"},"Clause Injection"),(0,i.kt)("p",null,'Often, you will come across a program whose output contains the input given by the user, or whose output needs to change conditionally based on the input. This is where clause injection comes in. By setting up your test sentence with "placeholders", you can dynamically "inject" clauses when the test is run.'),(0,i.kt)("p",null,"The two main use cases for clause injection are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Including the input in the output")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Changing the output based on the input"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"This is useful for testing programs that have a conditional output.")))),(0,i.kt)("h2",{id:"placeholder-setup"},"Placeholder Setup"),(0,i.kt)("p",null,"The first step in running a test is to set up the test sentence, with ",(0,i.kt)("inlineCode",{parentName:"p"},"PlaceHolder")," clauses inserted at the positions where the output varies and clauses need to be injected. For example a test sentence for a question that takes input and requires clause injection might look like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'public Clause[] testSentence() {\n        TestOption.isInputTest = true;\n        TestOption.defaultInput = "something";\n\n        return new Clause[]{\n                new StringLiteral("This is a test with retrieval."),\n                new NewLine(),\n                new PlaceHolder(),\n        };\n    }\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),(0,i.kt)("inlineCode",{parentName:"h5"},"PlaceHolder"))),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can have ",(0,i.kt)("em",{parentName:"p"},(0,i.kt)("strong",{parentName:"em"},"as many"))," ",(0,i.kt)("inlineCode",{parentName:"p"},"PlaceHolder")," clauses as you want in your test sentence, and you can vary the number of ",(0,i.kt)("inlineCode",{parentName:"p"},"PlaceHolder")," clauses that you have based on the requirements of your test. Multiple placeholders are useful when multiple separate parts of the output need to be injected. For example:"),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'    return new Clause[]{\n                new StringLiteral("This is a test with retrieval."),\n                new NewLine(),\n                new PlaceHolder(),\n                new StringLiteral("This is a static part of the output sandwiched between the two placeholders."),\n                new PlaceHolder(),\n        };\n')))),(0,i.kt)("h2",{id:"clause-injection-at-test-runtime"},"Clause Injection at Test Runtime"),(0,i.kt)("p",null,"Now that we have a test sentence with ",(0,i.kt)("inlineCode",{parentName:"p"},"PlaceHolder")," clauses, we need to inject the actual clauses into the test sentence. We can only know which clauses to inject based on the input case that is being tested. To illustrate how this works, assume we want to write a test for a program that asks the user for a number and prints out whether the number is a prime number. The sample output for this test would look like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"Enter a Number: \n6\nThe number 6 is not a prime number.\n")),(0,i.kt)("p",null,"We can set up out test sentence with two ",(0,i.kt)("inlineCode",{parentName:"p"},"PlaceHolder")," clauses like so:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'public Clause[] testSentence() {\n        TestOption.isInputTest = true;\n        TestOption.defaultInput = "1";\n\n        return new Clause[]{\n                new StringLiteral("Enter a number:"),\n                new NewLine(),\n                new StringLiteral("The number "),\n                new PlaceHolder(), // For the number\n                new StringLiteral(" is "),\n                new PlaceHolder(), // For the prime status\n        };\n    }\n')),(0,i.kt)("p",null,"So then we can test multiple cases by setting up two input providers, one for each case like so:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"static Stream<Integer> inputProviderPrime() {\n        return Stream.of(2, 3, 5, 7, 11, 13, 17, 19);\n}\n\nstatic Stream<Integer> inputProviderComposite() {\n        return Stream.of(4, 6, 8, 9, 10, 12, 14, 15);\n}\n\n")),(0,i.kt)("p",null,"The final step is writing our parameterized tests for each case with injected clauses like so:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'@ParameterizedTest\n@MethodSource("inputProviderPrime")\nvoid worksWithPrimeNumbers(int input) throws InvalidClauseException {\n    String message = "a prime number.";\n    runWithInput(String.valueOf(input), new Clause[]{\n            new IntegerLiteral(input, "injected"),\n            new StringLiteral(message)\n    });\n}\n\n@ParameterizedTest\n@MethodSource("inputProviderComposite")\nvoid worksWithCompositeNumbers(int input) throws InvalidClauseException {\n    String message = "not a prime number.";\n    runWithInput(String.valueOf(input), new Clause[]{\n            new IntegerLiteral(input, "injected"),\n            new StringLiteral(message)\n    });\n}\n')),(0,i.kt)("p",null,"To understand how this works, let's take a look at the resulting test sentence after injecting the clauses:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"For the prime case:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'return new Clause[]{\n        new StringLiteral("Enter a number:"),\n        new NewLine(),\n        new StringLiteral("The number "),\n        new IntegerLiteral(input, "injected"), // For the number\n        new StringLiteral(" is "),\n        new StringLiteral("a prime number."), // For the prime status\n        };\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"For the composite case:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'return new Clause[]{\n        new StringLiteral("Enter a number:"),\n        new NewLine(),\n        new StringLiteral("The number "),\n        new IntegerLiteral(input, "injected"), // For the number\n        new StringLiteral(" is "),\n        new StringLiteral("not a prime number."), // For the prime status\n        };\n')),(0,i.kt)("p",null,"So as we can see the injected clauses replace the ",(0,i.kt)("inlineCode",{parentName:"p"},"PlaceHolder")," clauses in the test sentence in the order that they are defined. For this case, the first ",(0,i.kt)("inlineCode",{parentName:"p"},"PlaceHolder")," clause is replaced with the input, and the second ",(0,i.kt)("inlineCode",{parentName:"p"},"PlaceHolder")," clause is replaced with the prime status. This is an example with two ",(0,i.kt)("inlineCode",{parentName:"p"},"PlaceHolder")," clauses, but usually you will only have one. Determine the number of ",(0,i.kt)("inlineCode",{parentName:"p"},"PlaceHolder")," clauses in your test sentence and the number of input providers you need based on the question."),(0,i.kt)("p",null,"For a full example of a test with injections look at ",(0,i.kt)("a",{parentName:"p",href:"./full-example#sample-test-with-clause-injection"},"Full Examples"),"."))}m.isMDXComponent=!0}}]);